<form
  #taskForm="ngForm"
  class="task-form shadow-lg p-4 rounded animate__fadeIn w-100 h-75"
  (ngSubmit)="submit(taskForm.value)"
>
  <div class="modal-header d-flex justify-content-between align-items-center">
    <button type="button" class="btn-close" (click)="close.emit()"></button>
  </div>
  <h4 class="text-center mb-3 fw-bold">{{defaultValues }}</h4>
  <div class="form-floating mb-3">
    <input
      type="text"
      class="form-control"
      [class.is-invalid]="title.invalid && title.touched"
      id="title"
      name="title"
      placeholder="Enter Task"
      ngModel
      [ngModel]="defaultValues?.title"
      required
      minlength="3"
      #title = "ngModel"
    />
    <label for="title">Task Title</label>
    <div class="small text-danger" *ngIf="title.invalid && title.touched">
      <span *ngIf="title.errors?.['required']">
        Title is required
      </span>
      <span *ngIf="title.errors?.['minlength']">
        Minimum length is 3
      </span>
      <span *ngIf="!(title.invalid && title.touched)" class="invisible"></span>
    </div>
  </div>
  <div class="form-floating mb-3">
    <textarea
      class="form-control"
      [class.is-invalid]="description.invalid && description.touched"
      name="description"
      id="description"
      placeholder="Write task description..."
      rows="2"
      ngModel
      [ngModel]="defaultValues?.description"
      required
      minlength="6"
      #description = "ngModel"
    ></textarea>
    <label for="description">Task Description</label>
    <div class="small text-danger" *ngIf="description.invalid && description.touched">
      <span *ngIf="description.errors?.['required']">
        Description is required
      </span>
      <span *ngIf="description.errors?.['minlength']">
        Minimum length is 5
      </span>
      <span *ngIf="description.invalid && description.touched" class="invalid"></span>
    </div>
  </div>
  <div class="form-floating mb-3" *ngIf="defaultValues === 'Add Task'">
    <ng-select
      class="styled-select"
      [items]="users"
      bindLabel="userName"
      bindValue="id"
      name="assignedUser"
      id="assignedUser"
      [(ngModel)]="selectedAssignedUser"
      (selectionChange)="onUserChange($event)"
      placeholder="Select User"
      [searchable]="true"
      [clearable]="true"
    >
    </ng-select>
  </div>
  <div class="form-floating mb-2">
    <textarea
      name="comment"
      class="form-control"
      id="comment"
      rows="2"
      placeholder="Write your note..."
      style="resize: none"
      ngModel
      #comment = "ngModel"
    ></textarea>
    <label for="comment">Comment</label>

  </div>

  <div class="form-check mb-3 animate__fadeIn">
    <input
      type="checkbox"
      name="urgent"
      id="urgent"
      class="form-check-input"
      ngModel
      [ngModel]="defaultValues?.urgent"
    />
    <label for="urgent" class="form-check-label">Urgent</label>
  </div>

  <button
    [disabled]="taskForm.invalid"
    type="submit"
    class="btn btn-primary w-100 submit-btn"
  >
    {{defaultValues}}
  </button>
</form>
